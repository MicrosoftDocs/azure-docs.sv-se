---
title: Microsoft Antimalware-tillägget för virtuella Windows-datorer i Azure
description: Distribuera tillägget Azure program mot skadlig kod på en virtuell Windows-dator med hjälp av ett tillägg.
services: virtual-machines
documentationcenter: ''
author: TerryLanfear
manager: rkarlin
editor: ''
ms.assetid: ''
ms.service: virtual-machines
ms.subservice: extensions
ms.collection: windows
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: infrastructure-services
ms.date: 02/23/2021
ms.author: terrylan
ms.openlocfilehash: db4341bf240717b48f3b2dfa6e119393be374f49
ms.sourcegitcommit: ed7376d919a66edcba3566efdee4bc3351c57eda
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 03/24/2021
ms.locfileid: "105042772"
---
# <a name="microsoft-antimalware-extension-for-windows"></a>Microsoft Antimalware-tillägget för Windows

## <a name="overview"></a>Översikt

Modern hotet i moln miljöer är mycket dynamisk och ökar belastningen på företagets IT-moln för att upprätthålla ett effektivt skydd för att uppfylla efterlevnads-och säkerhets krav. Microsoft Antimalware för Azure är en kostnads fri real tids skydds funktion som hjälper dig att identifiera och ta bort virus, spionprogram och annan skadlig program vara, med konfigurerbara aviseringar när kända skadlig eller oönskad program vara försöker installera sig själv eller köra på dina Azure-system. Lösningen bygger på samma plattform för program mot skadlig kod som Microsoft Security Essentials (MSE), Microsoft Forefront Endpoint Protection, Microsoft System Center Endpoint Protection, Windows Intune och Windows Defender för Windows 8,0 och högre.
Microsoft Antimalware för Azure är en lösning för en lösning för program-och klient miljöer som är utformad för att köras i bakgrunden utan mänsklig inblandning. Du kan distribuera skydd baserat på dina arbets belastningar för dina program, med antingen grundläggande säkerhet eller avancerad anpassad konfiguration, inklusive övervakning av program mot skadlig kod.

## <a name="prerequisites"></a>Förutsättningar

### <a name="operating-system"></a>Operativsystem

Microsofts lösning för program mot skadlig kod för Azure innehåller Microsoft Antimalware-klienten och den klassiska distributions modellen för program mot skadlig kod, PowerShell-cmdletar för skadlig kod och Azure-diagnostik-tillägg. Microsoft-lösningen för program mot skadlig kod stöds i operativ system familjer för Windows Server 2008 R2, Windows Server 2012 och Windows Server 2012 R2. Det stöds inte på operativ systemet Windows Server 2008 och stöds inte i Linux. 

Windows Defender är inbyggt program mot skadlig kod som är aktiverat i Windows Server 2016. Windows Defender-gränssnittet är också aktiverat som standard på vissa Windows Server 2016 SKU: er.
Tillägget för program mot skadlig kod för Azure VM kan fortfarande läggas till i en virtuell Windows Server 2016 Azure-dator med Windows Defender, men i det här scenariot tillämpar tillägget eventuella valfria konfigurations principer som ska användas av Windows Defender. tillägget kommer inte att distribuera någon ytterligare tjänst för program mot skadlig kod. Du kan läsa mer om den här uppdateringen [här](/archive/blogs/azuresecurity/update-to-azure-antimalware-extension-for-cloud-services).

### <a name="internet-connectivity"></a>Internetanslutning

Microsoft Antimalware för Windows kräver att den virtuella mål datorn är ansluten till Internet för att kunna ta emot regelbundna uppdateringar av motor och signaturer. 

## <a name="template-deployment"></a>Malldistribution
Azure VM-tillägg kan distribueras med Azure Resource Manager mallar. Mallar är idealiska när du distribuerar en eller flera virtuella datorer som kräver konfiguration av distributions konfiguration, till exempel onboarding i Azure antimalware.

JSON-konfigurationen för ett tillägg för virtuell dator kan kapslas i den virtuella dator resursen eller placeras på rot-eller toppnivå i en Resource Manager JSON-mall. Placeringen av JSON-konfigurationen påverkar värdet för resurs namn och typ. Mer information finns i [Ange namn och typ för underordnade resurser](../../azure-resource-manager/templates/child-resource-name-type.md). 

Följande exempel förutsätter att VM-tillägget är kapslat i den virtuella dator resursen. Vid kapsling av tilläggs resursen placeras JSON i `"resources": []` objektet på den virtuella datorn.

```json
{
      "type": "Microsoft.Compute/virtualMachines/extensions",
      "name": "[concat(parameters('vmName'),'/', parameters('vmExtensionName'))]",
      "apiVersion": "2019-07-01",
      "location": "[resourceGroup().location]",
      "dependsOn": [
        "[concat('Microsoft.Compute/virtualMachines/', parameters('vmName'))]"
      ],

      "properties": {
        "publisher": "Microsoft.Azure.Security",
        "type": "IaaSAntimalware",
        "typeHandlerVersion": "1.3",
        "autoUpgradeMinorVersion": true,
        "settings": {
          "AntimalwareEnabled": "true",
          "Exclusions": {
            "Extensions": ".log;.ldf",
            "Paths": "D:\\IISlogs;D:\\DatabaseLogs",
            "Processes": "mssence.svc"
          },

          "RealtimeProtectionEnabled": "true",
          "ScheduledScanSettings": {
            "isEnabled": "true",
            "scanType": "Quick",
            "day": "7",
            "time": "120"
          }
        },
        "protectedSettings": null
      }
}
```

## <a name="powershell-deployment"></a>PowerShell-distribution
Är beroende av din typ av distribution använder du motsvarande kommandon för att distribuera tillägget Azures virtuella dator tillägg till en befintlig virtuell dator.

  * [Azure Resource Manager baserad virtuell dator](../../security/fundamentals/antimalware-code-samples.md#enable-and-configure-microsoft-antimalware-for-azure-resource-manager-vms)
  * [Azure Service Fabric-kluster](../../security/fundamentals/antimalware-code-samples.md#add-microsoft-antimalware-to-azure-service-fabric-clusters)
  * [Klassisk moln tjänst](/powershell/module/servicemanagement/azure.service/set-azureserviceextension)

## <a name="troubleshoot-and-support"></a>Felsöka och support

### <a name="troubleshoot"></a>Felsöka

Microsofts tilläggs loggar för program mot skadlig kod finns tillgängliga i-%Systemdrive%\WindowsAzure\Logs\Plugins\Microsoft.Azure.Security.IaaSAntimalware (eller PaaSAntimalware) \1.5.5.x (version #) \CommandExecution.log

### <a name="error-codes-and-their-meanings"></a>Felkoder och deras betydelser

| Felkod | Innebörd | Möjlig åtgärd |
| :---: | --- | --- |
| – 2147156224 | MSI är upptaget med en annan installation | Försök att köra installationen senare |
| – 2147156221 | Installations programmet för MSE körs redan | Kör endast en instans i taget |
| – 2147156208 | Lite disk utrymme < 200 MB | Ta bort oanvända filer och försök att installera igen |
| – 2147156187 | Senaste installation, uppgradering, uppdatering eller avinstallation begärd omstart | Starta om och gör om installationen |
| – 2147156121 | Det gjordes ett försök att ta bort konkurrentens produkt. Men det gick inte att avinstallera konkurrentens produkt | Försök att ta bort konkurrentens produkt manuellt, starta om och gör om installationen  |
| – 2147156116 | Det gick inte att verifiera princip filen | Se till att skicka en giltig princip-XML-fil till installationen  |
| – 2147156095 | Det gick inte att starta tjänsten för program mot skadlig kod | Kontrol lera att alla binärfiler är korrekt signerade och att rätt licensierings fil är installerad |
| – 2147023293 | Ett allvarligt fel inträffade under installationen. I de flesta fall är det. Epp.msi, kan inte register\start\stop för AM-eller minitidslinjen | MSI-loggar från EPP.msi krävs här för framtida undersökning |
| – 2147023277 | Det gick inte att öppna installations paketet | Kontrol lera att paketet finns och är tillgängligt, eller kontakta program leverantören för att kontrol lera att det är ett giltigt Windows Installer-paket |
| – 2147156109 | Defender krävs som krav |  |
| – 2147205073 | WebSSO-utfärdaren stöds inte | |
| – 2147024893 | Det går inte att hitta den angivna sökvägen |  |
| – 2146885619 | Inget kryptografiskt meddelande eller så är det kryptografiska meddelandet felaktigt formaterat |  |
| – 1073741819 | Instruktionen på 0x% p refererade till minne vid 0x% p. Minnet kunde inte vara% s |  |
| 1 | Felaktig funktion |  |


### <a name="support"></a>Support

Om du behöver mer hjälp när som helst i den här artikeln kan du kontakta Azure-experterna i [MSDN Azure och Stack Overflow forum](https://azure.microsoft.com/support/forums/). Du kan också skriva en support incident för Azure. Gå till [Support webbplatsen för Azure](https://azure.microsoft.com/support/options/)och välj få support. Information om hur du använder Azure-support finns i [vanliga frågor och svar om Microsoft Azure support](https://azure.microsoft.com/support/faq/).
