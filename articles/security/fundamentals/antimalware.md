---
title: Microsoft Antimalware för Azure | Microsoft Docs
description: Lär dig mer om Microsoft Antimalware för Azure Cloud Services och Virtual Machines. Se information om ämnen som arkitektur och distributions scenarier.
services: security
documentationcenter: na
author: terrylanfear
manager: rkarlin
ms.assetid: 265683c8-30d7-4f2b-b66c-5082a18f7a8b
ms.service: security
ms.subservice: security-fundamentals
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 02/05/2021
ms.author: terrylan
ms.openlocfilehash: d9fcf764107327a01894b911326af6267a042366
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 03/29/2021
ms.locfileid: "101709367"
---
# <a name="microsoft-antimalware-for-azure-cloud-services-and-virtual-machines"></a>Microsoft Antimalware för Azure Cloud Services och Virtual Machines

Microsoft Antimalware för Azure är ett kostnads fritt real tids skydd som hjälper dig att identifiera och ta bort virus, spionprogram och annan skadlig program vara. Den genererar aviseringar när en känd skadlig eller oönskad program vara försöker installera sig själv eller köra på dina Azure-system.

Lösningen bygger på samma plattform för program mot skadlig kod som Microsoft Security Essentials \[ MSE \] , microsoft Forefront Endpoint Protection, Microsoft System Center Endpoint Protection, Microsoft Intune och Microsoft Defender. Microsoft Antimalware för Azure är en lösning för en lösning för program-och klient miljöer som är utformad för att köras i bakgrunden utan mänsklig inblandning. Skyddet kan distribueras baserat på behoven hos program arbets belastningar, med antingen grundläggande säkerhet eller avancerad anpassad konfiguration, inklusive övervakning av program mot skadlig kod.

När du distribuerar och aktiverar Microsoft Antimalware för Azure för dina program är följande kärn funktioner tillgängliga:

* **Real tids skydd** – övervakar aktivitet i Cloud Services och på Virtual Machines för att identifiera och blockera körning av skadlig kod.
* **Schemalagd genomsökning** – söker regelbundet efter skadlig kod, inklusive program som körs aktivt.
* **Reparation av skadlig kod** – vidta åtgärder automatiskt vid identifiering av skadlig kod, till exempel borttagning eller sätta av skadliga filer och rensning av skadliga register poster.
* **Uppdatering av signaturer** – installerar automatiskt de senaste skydds signaturerna (virus definitioner) för att säkerställa att skyddet är uppdaterat på en fördefinierad frekvens.
* **Uppdateringar av motorn för program mot skadlig kod** – uppdaterar automatiskt Microsoft Antimalware-motorn.
* **Plattforms uppdateringar för program mot skadlig kod** – uppdaterar automatiskt plattformen Microsoft Antimalware.
* **Aktivt skydd** – rapporterar telemetri metadata om identifierade hot och misstänkta resurser för att Microsoft Azure för att säkerställa snabba svar på det föränderliga hotet, samt för att aktivera leverans av synkron signatur i real tid via Microsoft Active Protection System (Maps).
* **Exempel på rapportering** – ger och rapporterar exempel till Microsoft Antimalware-tjänsten för att förfina tjänsten och aktivera fel sökning.
* **Undantag** – gör det möjligt för program-och tjänst administratörer att konfigurera undantag för filer, processer och enheter.  
* **Insamling av program mot skadlig kod** – registrerar hälso tillstånd för program mot skadlig kod, misstänkta aktiviteter och reparations åtgärder som vidtagits i händelse loggen för operativ systemet och samlar in dem i kundens Azure Storage konto.

> [!NOTE]
> Microsoft Antimalware kan också distribueras med hjälp av Azure Security Center. Läs [installations Endpoint Protection i Azure Security Center](../../security-center/security-center-services.md#supported-endpoint-protection-solutions-) om du vill ha mer information.

## <a name="architecture"></a>Arkitektur

Microsoft Antimalware för Azure innehåller Microsofts program mot skadlig kod och klassisk distributions modell för program mot skadlig kod, PowerShell-cmdletar mot skadlig kod och Azure-diagnostik-tillägg. Microsoft Antimalware stöds i operativ system familjer för Windows Server 2008 R2, Windows Server 2012 och Windows Server 2012 R2. Det stöds inte på operativ systemet Windows Server 2008 och stöds inte i Linux.

Microsoft Antimalware-klienten och-tjänsten installeras som standard i ett inaktiverat tillstånd i alla Azure-operativsystem som stöds i Cloud Servicess plattformen. Klienten och tjänsten för program mot skadlig kod installeras inte som standard i Virtual Machines-plattformen och är tillgänglig som en valfri funktion i Azure Portal och konfigurationen av virtuella datorer i Visual Studio under säkerhets tillägg.

När du använder Azure App Service i Windows, har den underliggande tjänsten som är värd för webbappen aktiverat Microsoft Antimalware-programvara. Detta används för att skydda Azure App Service-infrastruktur och inte körs på kund innehåll.

> [!NOTE]
> Microsoft Defender är inbyggt program mot skadlig kod som är aktiverat i Windows Server 2016. Microsoft Defender-gränssnittet är också aktiverat som standard på vissa Windows Server 2016 SKU: er [finns här för mer information](/windows/threat-protection/windows-defender-antivirus/windows-defender-antivirus-on-windows-server-2016). Tillägget Azure VM-tillägg för program mot skadlig kod kan fortfarande läggas till i en virtuell Windows Server 2016 Azure-dator med Microsoft Defender, men i det här scenariot tillämpar tillägget eventuella valfria [konfigurations principer](https://gallery.technet.microsoft.com/Antimalware-For-Azure-5ce70efe) som ska användas av Microsoft Defender. tillägget kommer inte att distribuera några ytterligare tjänster för program mot skadlig kod.
> Du kan läsa mer om den här uppdateringen [här](/archive/blogs/azuresecurity/update-to-azure-antimalware-extension-for-cloud-services).

### <a name="microsoft-antimalware-workflow"></a>Microsoft Antimalware-arbetsflöde

Azure-tjänsteadministratören kan aktivera program mot skadlig kod för Azure med en standard konfiguration eller anpassad konfiguration för din Virtual Machines och Cloud Services med hjälp av följande alternativ:

* Virtual Machines – i Azure Portal under **säkerhets tillägg**
* Virtual Machines – använda konfigurationen för virtuella datorer i Visual Studio i Server Explorer
* Virtual Machines och Cloud Services – använda den [klassiska distributions modellen](/previous-versions/azure/ee460799(v=azure.100)) för program mot skadlig kod
* Virtual Machines och Cloud Services – använda PowerShell-cmdlets för program mot skadlig kod

Azure Portal-eller PowerShell-cmdletar skickar tilläggs paket filen för program mot skadlig kod till Azure-systemet på en fördefinierad fast plats. Azures gästa Gent (eller Fabric-agenten) startar tillägget för program mot skadlig kod och använder konfigurations inställningarna för program mot skadlig kod som angetts som inmatade. Det här steget aktiverar tjänsten för program mot skadlig kod med antingen standard-eller anpassade konfigurations inställningar. Om ingen anpassad konfiguration anges aktive ras tjänsten för program mot skadlig kod med standard konfigurations inställningarna. Mer information finns i avsnittet *konfiguration av program mot skadlig kod* i [Microsoft Antimalware för Azure – kod exempel](/samples/browse/?redirectedfrom=TechNet-Gallery "Kod exempel för Microsoft Antimalware för Azure Cloud Services och VM") .

När du har kört Microsoft program mot skadlig kod laddar klienten ned de senaste definitionerna för skydds motorn och signaturen från Internet och läser in dem i Azure-systemet. Microsofts tjänst för program mot skadlig kod skriver service händelser till loggen system OS-händelser under händelse källan "Microsoft Antimalware". Händelser inkluderar hälso tillstånd för program mot skadlig kod, skydds-och reparations status, nya och gamla konfigurations inställningar, motor uppdateringar och definitioner för signaturer och andra.

Du kan aktivera övervakning av program mot skadlig kod för moln tjänsten eller den virtuella datorn så att händelse logg händelserna för program mot skadlig kod skrivs som de skapas i ditt Azure Storage-konto. Tjänsten för program mot skadlig kod använder Azure-diagnostik-tillägget för att samla in händelser mot skadlig kod från Azure-systemet till tabeller i kundens Azure Storage konto.

Distributions arbets flödet, inklusive konfigurations steg och alternativ som stöds för ovanstående scenarier finns dokumenterade i avsnittet [distributions scenarier för program mot skadlig kod](#antimalware-deployment-scenarios) i det här dokumentet.

![Microsoft Antimalware i Azure](./media/antimalware/sec-azantimal-fig1.PNG)

> [!NOTE]
> Du kan dock använda PowerShell/API: er och Azure Resource Manager mallar för att distribuera Virtual Machine Scale Sets med Microsoft-tillägget mot skadlig kod.  För att installera ett tillägg på en virtuell dator som redan körs kan du använda python-skriptet [vmssextn.py](https://github.com/gbowerman/vmsstools). Det här skriptet hämtar den befintliga tilläggs konfigurationen på skalnings uppsättningen och lägger till ett tillägg i listan över befintliga tillägg på VM Scale Sets.
>
>

### <a name="default-and-custom-antimalware-configuration"></a>Standard konfiguration och anpassad konfiguration av program mot skadlig kod

Standard konfigurations inställningarna tillämpas för att aktivera program mot skadlig kod för Azure Cloud Services eller Virtual Machines när du inte anger anpassade konfigurations inställningar. Standard konfigurations inställningarna har föroptimerats för att köras i Azure-miljön. Du kan också anpassa de här standard konfigurations inställningarna efter behov för Azure-programmet eller tjänst distributionen och tillämpa dem för andra distributions scenarier.

I följande tabell sammanfattas de konfigurations inställningar som är tillgängliga för tjänsten för program mot skadlig kod. Standard konfigurations inställningarna markeras under kolumnen med namnet "default" nedan.

![Tabell 1](./media/antimalware/sec-azantimal-tb18.png)

## <a name="antimalware-deployment-scenarios"></a>Distributions scenarier för program mot skadlig kod

Scenarier för att aktivera och konfigurera program mot skadlig kod, inklusive övervakning av Azure Cloud Services och Virtual Machines, beskrivs i det här avsnittet.

### <a name="virtual-machines---enable-and-configure-antimalware"></a>Virtuella datorer – aktivera och konfigurera program mot skadlig kod

#### <a name="deployment-while-creating-a-vm-using-the-azure-portal"></a>Distribution när du skapar en virtuell dator med hjälp av Azure Portal

Följ stegen nedan om du vill aktivera och konfigurera Microsoft Antimalware för Azure Virtual Machines att använda Azure Portal när du konfigurerar en virtuell dator:

1. Logga in på Azure Portal på <https://portal.azure.com>.
2. Om du vill skapa en ny virtuell dator går du till **virtuella datorer**, väljer **Lägg till** och väljer **Windows Server**.
3. Välj den version av Windows Server som du vill använda.
4. Välj **Skapa**.
    ![Skapa en virtuell dator](./media/antimalware/create-vm.PNG)
5. Ange ett **namn**, **användar namn**, **lösen ord** och skapa en ny resurs grupp eller Välj en befintlig resurs grupp.
6. Välj **OK**.
7. Välj en VM-storlek.
8. I nästa avsnitt ska du göra lämpliga val för dina behov genom att välja avsnittet **tillägg** .
9. Välj **Lägg till tillägg**
10. Under **Ny resurs** väljer du **Microsoft Antimalware**.
11. Välj **Skapa**
12. I avsnittet **installera tillägg** kan platser och process undantag konfigureras samt andra skannings alternativ. Välj **OK**.
13. Välj **OK**.
14. Gå tillbaka till avsnittet **Inställningar** och välj **OK**.
15. På sidan **skapa** väljer du **OK**.

Se denna [Azure Resource Manager mall](https://github.com/Azure/azure-quickstart-templates/blob/master/anti-malware-extension-windows-vm/azuredeploy.json#L261) för distribution av VM-tillägg för program mot skadlig kod för Windows.

#### <a name="deployment-using-the-visual-studio-virtual-machine-configuration"></a>Distribution med hjälp av konfiguration av Visual Studio virtuell dator

Aktivera och konfigurera Microsoft Antimalware-tjänsten med Visual Studio:

1. Anslut till Microsoft Azure i Visual Studio.

2. Välj den virtuella datorn i noden **Virtual Machines** i **Server Explorer**

   ![Konfiguration av virtuell dator i Visual Studio](./media/antimalware/sec-azantimal-fig5.PNG)

3. Högerklicka på **Konfigurera** för att Visa konfigurations sidan för den virtuella datorn

4. Välj tillägget **Microsoft Antimalware** i list rutan under **installerade tillägg** och klicka på **Lägg till** för att konfigurera med standard konfigurationen för program mot skadlig kod.
    ![Installerade tillägg](./media/antimalware/sec-azantimal-fig6.PNG)
5. Om du vill anpassa standard konfigurationen för program mot skadlig kod väljer du (markera) tillägget för program mot skadlig kod i listan installerade tillägg och klickar på **Konfigurera**.

6. Ersätt standard konfigurationen för program mot skadlig kod med din anpassade konfiguration i JSON-format som stöds i text rutan för den **offentliga konfigurationen** och klicka på OK.

7. Klicka på knappen **Uppdatera** för att skicka konfigurations uppdateringarna till den virtuella datorn.

    ![Konfigurations tillägg för virtuell dator](./media/antimalware/sec-azantimal-fig7.PNG)

> [!NOTE]
>Visual Studio Virtual Machines-konfigurationen för program mot skadlig kod stöder bara JSON-format-konfiguration. Mallen JSON-konfigurationsinställningar för program mot skadlig kod ingår i [Microsoft Antimalware för Azure-kod exempel](/samples/browse/?redirectedfrom=TechNet-Gallery "Microsoft Antimalware för Azure-kod exempel")som visar de konfigurations inställningar som stöds för program mot skadlig kod.

#### <a name="deployment-using-powershell-cmdlets"></a>Distribution med PowerShell-cmdletar

Ett Azure-program eller-tjänst kan aktivera och konfigurera Microsoft Antimalware för Azure Virtual Machines med hjälp av PowerShell-cmdletar.

Så här aktiverar och konfigurerar du Microsoft Antimalware med PowerShell-cmdlet: ar för skadlig kod:

1. Konfigurera din PowerShell-miljö – Läs mer i dokumentationen på <https://github.com/Azure/azure-powershell>
2. Använd cmdleten [set-AzureVMMicrosoftAntimalwareExtension](/powershell/module/servicemanagement/azure.service/set-azurevmmicrosoftantimalwareextension) för att aktivera och konfigurera Microsoft Antimalware för den virtuella datorn.

> [!NOTE]
>Azure Virtual Machines-konfigurationen för program mot skadlig kod stöder bara JSON-format-konfiguration. Mallen JSON-konfigurationsinställningar för program mot skadlig kod ingår i [Microsoft Antimalware för Azure-kod exempel](/samples/browse/?redirectedfrom=TechNet-Gallery "Microsoft Antimalware för Azure-kod exempel")som visar de konfigurations inställningar som stöds för program mot skadlig kod.

### <a name="enable-and-configure-antimalware-using-powershell-cmdlets"></a>Aktivera och konfigurera program mot skadlig kod med PowerShell-cmdletar

Ett Azure-program eller-tjänst kan aktivera och konfigurera Microsoft Antimalware för Azure Cloud Services med hjälp av PowerShell-cmdletar. Observera att Microsoft Antimalware är installerat i ett inaktiverat tillstånd i Cloud Services-plattformen och kräver en åtgärd av ett Azure-program för att aktivera det.

Aktivera och konfigurera Microsoft Antimalware med PowerShell-cmdlet: ar:

1. Konfigurera din PowerShell-miljö – Läs mer i dokumentationen på <https://github.com/Azure/azure-powershell>
2. Använd cmdleten [set-AzureServiceExtension](/powershell/module/servicemanagement/azure.service/set-azureserviceextension) för att aktivera och konfigurera Microsoft Antimalware för din moln tjänst.

Mallen för konfigurations inställningar för program mot skadlig kod ingår i [Microsoft Antimalware för Azure-kod exempel](/samples/browse/?redirectedfrom=TechNet-Gallery "Microsoft Antimalware för Azure-kod exempel")som visar de konfigurations inställningar som stöds för program mot skadlig kod.

### <a name="cloud-services-and-virtual-machines---configuration-using-powershell-cmdlets"></a>Cloud Services-och Virtual Machines-konfiguration med PowerShell-cmdletar

Ett Azure-program eller-tjänst kan hämta Microsoft Antimalware-konfigurationen för Cloud Services och Virtual Machines med hjälp av PowerShell-cmdletar.

Hämta Microsoft-konfigurationen för program mot skadlig kod med hjälp av PowerShell-cmdlet: ar:

1. Konfigurera din PowerShell-miljö – Läs mer i dokumentationen på <https://github.com/Azure/azure-powershell>
2. **För Virtual Machines**: Använd cmdleten [Get-AzureVMMicrosoftAntimalwareExtension](/powershell/module/servicemanagement/azure.service/get-azurevmmicrosoftantimalwareextension) för att hämta konfigurationen för program mot skadlig kod.
3. **För Cloud Services**: Använd cmdleten [Get-AzureServiceExtension](/powershell/module/servicemanagement/azure.service/get-azureserviceextension) för att hämta konfigurationen för program mot skadlig kod.

### <a name="remove-antimalware-configuration-using-powershell-cmdlets"></a>Ta bort konfigurationen av program mot skadlig kod med PowerShell-cmdletar

Ett Azure-program eller-tjänst kan ta bort konfigurationen för program mot skadlig kod och alla associerade övervaknings konfigurationen för program mot skadlig kod från relevanta tillägg för Azure program mot skadlig kod och diagnostik som är associerade med moln tjänsten eller den virtuella datorn.

Så här tar du bort Microsoft Antimalware med PowerShell-cmdlet: ar:

1. Konfigurera din PowerShell-miljö – Läs mer i dokumentationen på <https://github.com/Azure/azure-powershell>
2. **För Virtual Machines**: Använd cmdleten [Remove-AzureVMMicrosoftAntimalwareExtension](/powershell/module/servicemanagement/azure.service/remove-azurevmmicrosoftantimalwareextension) .
3. **För Cloud Services:** Använd cmdleten [Remove-AzureServiceExtension](/powershell/module/servicemanagement/azure.service/remove-azureserviceextension) .

Så här **aktiverar** du händelse insamling av skadlig kod för en virtuell dator med hjälp av Azure Preview Portal:

1. Klicka på en del av övervaknings linsen på bladet för den virtuella datorn
2. Klicka på kommandot diagnostik på mått bladet
3. Välj **status** på och markera alternativet för Windows Event system
4. . Du kan välja att avmarkera alla andra alternativ i listan eller låta dem vara aktiverade per dina program tjänst behov.
5. Händelse kategorierna "Error", "Warning", "information" och "information" i program mot skadlig kod samlas in i ditt Azure Storage-konto.

Händelser för program mot skadlig kod samlas in från Windows händelse system loggar till ditt Azure Storage-konto. Du kan konfigurera lagrings kontot för den virtuella datorn för att samla in händelser mot skadlig kod genom att välja lämpligt lagrings konto.

![Mått och diagnostik](./media/antimalware/sec-azantimal-fig8.PNG)

### <a name="enable-and-configure-antimalware-using-powershell-cmdlets-for-azure-resource-manager-vms"></a>Aktivera och konfigurera program mot skadlig kod med PowerShell-cmdletar för Azure Resource Manager virtuella datorer
Du kan aktivera och konfigurera Microsoft Antimalware för Azure Resource Manager virtuella datorer med PowerShell-cmdletar.

Så här aktiverar och konfigurerar du Microsoft Antimalware med PowerShell-cmdlet: ar för skadlig kod:

1. Konfigurera din PowerShell-miljö med hjälp av den här [dokumentationen](https://github.com/Azure/azure-powershell) på GitHub.
2. Använd cmdleten [set-AzureRmVMExtension](/powershell/module/azurerm.compute/set-azurermvmextension) för att aktivera och konfigurera Microsoft Antimalware för den virtuella datorn.

Följande kod exempel är tillgängliga:

- [Distribuera Microsoft Antimalware på virtuella ARM-datorer](antimalware-code-samples.md#enable-and-configure-microsoft-antimalware-for-azure-resource-manager-vms)
- [Lägga till Microsoft Antimalware i Azure Service Fabric-kluster](antimalware-code-samples.md#add-microsoft-antimalware-to-azure-service-fabric-clusters)

## <a name="next-steps"></a>Nästa steg
Se [kod exempel](antimalware-code-samples.md) för att aktivera och konfigurera Microsoft Antimalware för virtuella datorer med Azure Resource Manager (arm).