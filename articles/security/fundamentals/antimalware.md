---
title: Microsoft Antimalware för Azure | Microsoft Docs
description: Läs mer Microsoft Antimalware om Azure Cloud Services och Virtual Machines. Se information om ämnen som arkitektur och distributionsscenarier.
services: security
documentationcenter: na
author: terrylanfear
manager: rkarlin
ms.assetid: 265683c8-30d7-4f2b-b66c-5082a18f7a8b
ms.service: security
ms.subservice: security-fundamentals
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 04/15/2021
ms.author: terrylan
ms.openlocfilehash: 4290645f3dabced9896376328186655a7a4a81bb
ms.sourcegitcommit: 272351402a140422205ff50b59f80d3c6758f6f6
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 04/17/2021
ms.locfileid: "107587467"
---
# <a name="microsoft-antimalware-for-azure-cloud-services-and-virtual-machines"></a>Microsoft Antimalware för Azure Cloud Services och Virtual Machines

Microsoft Antimalware för Azure är ett kostnadsfritt realtidsskydd som hjälper dig att identifiera och ta bort virus, spionprogram och annan skadlig programvara. Den genererar aviseringar när känd skadlig eller oönskad programvara försöker installera sig själv eller köras på dina Azure-system.

Lösningen bygger på samma plattform för program mot skadlig programvara som Microsoft Security Essentials \[ \] MSE, Microsoft Forefront Endpoint Protection, Microsoft System Center Endpoint Protection, Microsoft Intune och Microsoft Defender. Microsoft Antimalware för Azure är en lösning med en agent för program och klientmiljöer som är utformad för att köras i bakgrunden utan mänsklig inblandning. Skydd kan distribueras baserat på behoven för programarbetsbelastningar, med antingen grundläggande säker som standard eller avancerad anpassad konfiguration, inklusive övervakning av program mot skadlig kod.

När du distribuerar och Microsoft Antimalware för Azure för dina program är följande huvudfunktioner tillgängliga:

* **realtidsskydd** – övervakar aktivitet i Cloud Services och på Virtual Machines för att identifiera och blockera körning av skadlig kod.
* **Schemalagd genomsökning** – Genomsöker regelbundet för att identifiera skadlig kod, inklusive program som körs aktivt.
* **Reparation av skadlig kod** – vidtar automatiskt åtgärder vid upptäckt skadlig kod, till exempel borttagning eller karantän av skadliga filer och rensning av skadliga registerposter.
* **Signaturuppdateringar** – installerar automatiskt de senaste skyddssignaturerna (virusdefinitioner) för att säkerställa att skyddet är uppdaterat på en förbestämd frekvens.
* **Uppdateringar av motorn för program mot** skadlig programvara – uppdaterar Microsoft Antimalware motorn automatiskt.
* **Uppdateringar av plattformen för program mot** skadlig programvara – uppdaterar Microsoft Antimalware plattformen automatiskt.
* **Aktivt skydd** – rapporterar telemetrimetadata om identifierade hot och misstänkta resurser till Microsoft Azure för att säkerställa snabba svar på det växande hotlandskapet, samt aktivera synkron signaturleverans i realtid via Microsoft Active Protection System (MAPS).
* **Exempelrapportering** – tillhandahåller och rapporterar exempel till Microsoft Antimalware tjänsten för att hjälpa till att förfina tjänsten och aktivera felsökning.
* **Undantag –** gör att program- och tjänstadministratörer kan konfigurera undantag för filer, processer och enheter.  
* **Insamling av program mot** skadlig programvara – registrerar tjänstens hälsotillstånd för program mot skadlig programvara, misstänkta aktiviteter och reparationsåtgärder som vidtas i händelseloggen för operativsystemet och samlar in dem i kundens Azure Storage konto.

> [!NOTE]
> Microsoft Antimalware också distribueras med hjälp av Azure Security Center. Läs [Installera Endpoint Protection i Azure Security Center](../../security-center/security-center-services.md#supported-endpoint-protection-solutions-) mer information.

## <a name="architecture"></a>Arkitektur

Microsoft Antimalware för Azure innehåller Microsoft Antimalware Client and Service, Klassisk antimalware-distributionsmodell, PowerShell-cmdlets för program mot skadlig programvara och Azure Diagnostics-tillägg. Microsoft Antimalware stöds på Windows Server 2008 R2-, Windows Server 2012- och Windows Server 2012 R2-operativsystemfamiljer. Det stöds inte på operativsystemet Windows Server 2008 och stöds inte heller i Linux.

Klienten Microsoft Antimalware och tjänsten installeras som standard i ett inaktiverat tillstånd i alla Azure-gästoperativsystemets familjer som stöds i Cloud Services plattformen. Klienten Microsoft Antimalware och tjänsten installeras inte som standard på Virtual Machines-plattformen och är tillgänglig som en valfri funktion via konfigurationen Azure Portal och Visual Studio virtuell dator under Säkerhetstillägg.

När du Azure App Service på Windows har den underliggande tjänsten som är värd för webbappen Microsoft Antimalware aktiverat på den. Detta används för att skydda Azure App Service och körs inte på kundinnehåll.

> [!NOTE]
> Microsoft Defender är det inbyggda program mot skadlig programvara som är aktiverat i Windows Server 2016. Microsoft Defender-gränssnittet är också aktiverat som standard på vissa Windows Server 2016 SKU:er [finns här för mer information.](/windows/threat-protection/windows-defender-antivirus/windows-defender-antivirus-on-windows-server-2016) Tillägget Azure VM Antimalware kan fortfarande läggas till i en virtuell Windows Server 2016 Azure-dator med Microsoft Defender, men i det här scenariot tillämpar tillägget valfria konfigurationsprinciper som ska användas av Microsoft Defender. Tillägget distribuerar inte några ytterligare tjänster mot skadlig programvara. [](https://gallery.technet.microsoft.com/Antimalware-For-Azure-5ce70efe)
> Du kan läsa mer om den här uppdateringen [här.](/archive/blogs/azuresecurity/update-to-azure-antimalware-extension-for-cloud-services)

### <a name="microsoft-antimalware-workflow"></a>Arbetsflöde för Microsoft-program mot skadlig programvara

Azure-tjänstadministratören kan aktivera program mot skadlig kod för Azure med en standardkonfiguration eller anpassad konfiguration för din Virtual Machines och Cloud Services med hjälp av följande alternativ:

* Virtual Machines – I Azure Portal under **Säkerhetstillägg**
* Virtual Machines – Använda konfigurationen Visual Studio virtuella datorer i Server Explorer
* Virtual Machines och Cloud Services – Använda den klassiska distributionsmodellen för [program mot skadlig programvara](/previous-versions/azure/ee460799(v=azure.100))
* Virtual Machines och Cloud Services – Använda PowerShell-cmdlets för program mot skadlig programvara

Med Azure Portal- eller PowerShell-cmdlets push-filen med tillägget Antimalware till Azure-systemet på en förbestämd fast plats. Azure-gästagenten (eller infrastrukturagenten) startar tillägget för program mot skadlig programvara och tillämpar konfigurationsinställningarna för program mot skadlig programvara som indata. Det här steget aktiverar tjänsten Program mot skadlig kod med standardinställningar eller anpassade konfigurationsinställningar. Om ingen anpassad konfiguration har angetts aktiveras tjänsten för program mot skadlig kod med standardkonfigurationsinställningarna. Mer information finns *i konfigurationsavsnittet* för [program mot skadlig kod Microsoft Antimalware azure – kodexempel.](/samples/browse/?redirectedfrom=TechNet-Gallery "Microsoft Antimalware Kodexempel Azure Cloud Services virtuella datorer och datorer")

När den körs laddar Microsoft Antimalware ned den senaste skyddsmotorn och signaturdefinitionerna från Internet och läser in dem på Azure-systemet. Tjänsten Microsoft Antimalware skriver tjänstrelaterade händelser till systemoperativsystemets händelselogg under händelsekällan "Microsoft Antimalware". Händelser omfattar klienthälsotillståndet för program mot skadlig programvara, skydds- och reparationsstatus, nya och gamla konfigurationsinställningar, motoruppdateringar och signaturdefinitioner med mera.

Du kan aktivera övervakning av program mot skadlig programvara för din molntjänst eller virtuella dator så att händelser för program mot skadlig programvara skrivs när de skapas till ditt Azure Storage-konto. Tjänsten Antimalware använder Azure Diagnostics för att samla in händelser mot skadlig programvara från Azure-systemet till tabeller i kundens Azure Storage konto.

Distributionsarbetsflödet, inklusive konfigurationssteg och alternativ som stöds för ovanstående scenarier, dokumenteras i [avsnittet Distributionsscenarier för](#antimalware-deployment-scenarios) program mot skadlig programvara i det här dokumentet.

![Microsoft Antimalware i Azure](./media/antimalware/sec-azantimal-fig1.PNG)

> [!NOTE]
> Du kan dock använda Powershell/API:er och Azure Resource Manager för att distribuera Virtual Machine Scale Sets med tillägget Microsoft Anti-Malware.  Om du vill installera ett tillägg på en virtuell dator som redan körs kan du använda python-exempelskriptet [vmssextn.py](https://github.com/gbowerman/vmsstools). Det här skriptet hämtar den befintliga tilläggskonfigurationen på skalningsuppsättningen och lägger till ett tillägg i listan över befintliga tillägg på VM Scale Sets.
>
>

### <a name="default-and-custom-antimalware-configuration"></a>Standardkonfiguration och anpassad konfiguration för program mot skadlig kod

Standardkonfigurationsinställningarna tillämpas för att aktivera program mot skadlig kod för Azure Cloud Services eller Virtual Machines du inte anger anpassade konfigurationsinställningar. Standardkonfigurationsinställningarna har optimerats för körning i Azure-miljön. Du kan också anpassa de här standardkonfigurationsinställningarna efter behov för distributionen av Azure-program eller -tjänster och tillämpa dem för andra distributionsscenarier.

I följande tabell sammanfattas de konfigurationsinställningar som är tillgängliga för tjänsten Program mot skadlig programvara. Standardkonfigurationsinställningarna markeras under kolumnen med etiketten "Standard" nedan.

![Tabell 1](./media/antimalware/sec-azantimal-tb18.png)

## <a name="antimalware-deployment-scenarios"></a>Distributionsscenarier för program mot skadlig programvara

Scenarierna för att aktivera och konfigurera program mot skadlig programvara, inklusive övervakning Azure Cloud Services och Virtual Machines, beskrivs i det här avsnittet.

### <a name="virtual-machines---enable-and-configure-antimalware"></a>Virtuella datorer – aktivera och konfigurera program mot skadlig programvara

#### <a name="deployment-while-creating-a-vm-using-the-azure-portal"></a>Distribution När du skapar en virtuell dator med hjälp av Azure Portal

Om du vill aktivera Microsoft Antimalware konfigurera Virtual Machines Azure Virtual Machines med hjälp av Azure Portal när du etablerar en virtuell dator följer du stegen nedan:

1. Logga in på Azure Portal på <https://portal.azure.com>.
2. Om du vill skapa en ny virtuell dator går du **till Virtuella datorer,** **väljer Lägg** till och väljer **Windows Server.**
3. Välj den version av Windows Server som du vill använda.
4. Välj **Skapa**.
    ![Skapa en virtuell dator](./media/antimalware/create-vm.PNG)
5. Ange **namn,** **användarnamn,** **lösenord** och skapa en ny resursgrupp eller välj en befintlig resursgrupp.
6. Välj **OK**.
7. Välj en vm-storlek.
8. I nästa avsnitt gör du lämpliga val för dina behov genom att välja **avsnittet** Tillägg.
9. Välj **Lägg till tillägg**
10. Under **Ny resurs** väljer du **Microsoft Antimalware**.
11. Välj **Skapa**
12. I avsnittet **Installera** tillägg kan platser och process uteslutningar konfigureras samt andra skanningsalternativ. Välj **OK**.
13. Välj **OK**.
14. I avsnittet **Inställningar väljer** du **OK.**
15. På skärmen **Skapa** väljer du **OK.**

Se den [Azure Resource Manager mallen för](https://github.com/Azure/azure-quickstart-templates/blob/master/anti-malware-extension-windows-vm/azuredeploy.json#L261) distribution av VM-tillägg för program mot skadlig programvara för Windows.

#### <a name="deployment-using-the-visual-studio-virtual-machine-configuration"></a>Distribution med hjälp Visual Studio konfiguration av virtuell dator

Så här aktiverar och konfigurerar du Microsoft Antimalware-tjänsten med Visual Studio:

1. Anslut till Microsoft Azure i Visual Studio.

2. Välj din virtuella dator i **Virtual Machines** i **Server Explorer**

   ![Konfiguration av virtuell dator i Visual Studio](./media/antimalware/sec-azantimal-fig5.PNG)

3. Högerklicka på konfigurera **för** att visa sidan Konfiguration av virtuell dator

4. Välj **Microsoft Antimalware i** listrutan under Installerade tillägg och klicka på Lägg **till** för **att** konfigurera med standardkonfiguration för program mot skadlig programvara.
    ![Installerade tillägg](./media/antimalware/sec-azantimal-fig6.PNG)
5. Om du vill anpassa standardkonfigurationen för program mot skadlig programvara väljer du (markerar) tillägget Program mot skadlig programvara i listan över installerade tillägg och klickar på **Konfigurera.**

6. Ersätt standardkonfigurationen för program mot skadlig kod med din anpassade konfiguration i JSON-format som stöds i **textrutan offentlig** konfiguration och klicka på OK.

7. Klicka på **knappen Uppdatera** för att skicka konfigurationsuppdateringarna till den virtuella datorn.

    ![Konfigurationstillägg för virtuell dator](./media/antimalware/sec-azantimal-fig7.PNG)

> [!NOTE]
>Konfigurationen Visual Studio Virtual Machines antimalware stöder endast konfiguration av JSON-format. Mallen för JSON-konfigurationsinställningar för program mot skadlig kod [ingår i Microsoft Antimalware For Azure – Code Samples](/samples/browse/?redirectedfrom=TechNet-Gallery "Microsoft Antimalware för Azure – kodexempel")(Exempel på program mot skadlig kod) som visar de konfigurationsinställningar för program mot skadlig kod som stöds.

#### <a name="deployment-using-powershell-cmdlets"></a>Distribution med PowerShell-cmdlets

Ett Azure-program eller en Azure-tjänst kan aktivera och konfigurera Microsoft Antimalware azure-Virtual Machines med hjälp av PowerShell-cmdlets.

Så här aktiverar och konfigurerar Microsoft Antimalware powershell-cmdlets:

1. Konfigurera Din PowerShell-miljö – läs dokumentationen på <https://github.com/Azure/azure-powershell>
2. Använd [cmdleten Set-AzureVMMicrosoftAntimalwareExtension](/powershell/module/servicemanagement/azure.service/set-azurevmmicrosoftantimalwareextension) för att aktivera och konfigurera Microsoft Antimalware för den virtuella datorn.

> [!NOTE]
>Azure Virtual Machines för program mot skadlig programvara stöder endast konfiguration av JSON-format. JSON-konfigurationsinställningsmallen för program mot skadlig kod ingår [i Microsoft Antimalware For Azure – Code Samples](/samples/browse/?redirectedfrom=TechNet-Gallery "Microsoft Antimalware för Azure – kodexempel")( För Azure – Kodexempel) som visar de konfigurationsinställningar för program mot skadlig kod som stöds.

### <a name="enable-and-configure-antimalware-using-powershell-cmdlets"></a>Aktivera och konfigurera program mot skadlig programvara med PowerShell-cmdlets

Ett Program eller en tjänst i Azure kan aktivera och konfigurera Microsoft Antimalware för Azure Cloud Services med Hjälp av PowerShell-cmdlets. Observera att Microsoft Antimalware har installerats i ett inaktiverat tillstånd på Cloud Services plattformen och kräver en åtgärd av ett Azure-program för att aktivera det.

Så här aktiverar och konfigurerar Microsoft Antimalware powershell-cmdlets:

1. Konfigurera Din PowerShell-miljö – läs dokumentationen på <https://github.com/Azure/azure-powershell>
2. Använd [cmdleten Set-AzureServiceExtension](/powershell/module/servicemanagement/azure.service/set-azureserviceextension) för att aktivera och konfigurera Microsoft Antimalware för din molntjänst.

Mallen FÖR XML-konfigurationsinställningar för program mot skadlig [kod ingår i Microsoft Antimalware For Azure – Code Samples](/samples/browse/?redirectedfrom=TechNet-Gallery "Microsoft Antimalware för Azure – kodexempel")(Kodexempel) som visar de konfigurationsinställningar för program mot skadlig kod som stöds.

### <a name="cloud-services-and-virtual-machines---configuration-using-powershell-cmdlets"></a>Cloud Services och Virtual Machines – Konfiguration med PowerShell-cmdlets

Ett Program eller en tjänst i Azure kan hämta Microsoft Antimalware konfiguration för Cloud Services och Virtual Machines med Hjälp av PowerShell-cmdlets.

Så här hämtar du Microsoft Antimalware med PowerShell-cmdlets:

1. Konfigurera Din PowerShell-miljö – läs dokumentationen på <https://github.com/Azure/azure-powershell>
2. **För Virtual Machines:** Använd cmdleten [Get-AzureVMMicrosoftAntimalwareExtension](/powershell/module/servicemanagement/azure.service/get-azurevmmicrosoftantimalwareextension) för att hämta konfigurationen av program mot skadlig programvara.
3. **För Cloud Services:** Använd [cmdleten Get-AzureServiceExtension](/powershell/module/servicemanagement/azure.service/get-azureserviceextension) för att hämta konfigurationen för program mot skadlig programvara.

### <a name="remove-antimalware-configuration-using-powershell-cmdlets"></a>Ta bort konfiguration av program mot skadlig programvara med PowerShell-cmdlets

Ett Program eller en tjänst i Azure kan ta bort konfigurationen av program mot skadlig programvara och eventuella associerade övervakningskonfigurationer för program mot skadlig programvara från relevanta tjänsttillägg för Azure Antimalware och diagnostik som är associerade med molntjänsten eller den virtuella datorn.

Ta bort Microsoft Antimalware PowerShell-cmdlets:

1. Konfigurera Din PowerShell-miljö – läs dokumentationen på <https://github.com/Azure/azure-powershell>
2. **För Virtual Machines:** Använd cmdleten [Remove-AzureVMMicrosoftAntimalwareExtension.](/powershell/module/servicemanagement/azure.service/remove-azurevmmicrosoftantimalwareextension)
3. **För Cloud Services:** Använd [cmdleten Remove-AzureServiceExtension.](/powershell/module/servicemanagement/azure.service/remove-azureserviceextension)

Så **här aktiverar** du insamling av program mot skadlig programvara för en virtuell dator med hjälp av Azure Preview Portal:

1. Klicka på någon del av övervakningslinsen på bladet Virtuell dator
2. Klicka på diagnostikkommandot på bladet Mått
3. Välj **Status** PÅ och markera alternativet för Windows-händelsesystem
4. . Du kan välja att avmarkera alla andra alternativ i listan eller låta dem vara aktiverade enligt dina programtjänstbehov.
5. Händelsekategorierna "Fel", "Varning", "Information" osv., lagras i händelsekategorierna "Fel", "Varning", "Information" osv. i ditt Azure Storage konto.

Händelser för program mot skadlig programvara samlas in från Windows-händelsesystemloggarna till ditt Azure Storage konto. Du kan konfigurera lagringskontot för den virtuella datorn så att den samlar in händelser mot skadlig programvara genom att välja lämpligt lagringskonto.

![Mått och diagnostik](./media/antimalware/sec-azantimal-fig8.PNG)

### <a name="enable-and-configure-antimalware-using-powershell-cmdlets-for-azure-resource-manager-vms"></a>Aktivera och konfigurera program mot skadlig programvara med PowerShell-cmdlets för Azure Resource Manager virtuella datorer
Du kan aktivera och konfigurera Microsoft Antimalware för Azure Resource Manager virtuella datorer med Hjälp av PowerShell-cmdlets.

Så här aktiverar och konfigurerar du Microsofts program mot skadlig programvara med PowerShell-cmdlets för program mot skadlig programvara:

1. Konfigurera din PowerShell-miljö med hjälp av den [här dokumentationen](https://github.com/Azure/azure-powershell) på GitHub.
2. Använd [cmdleten Set-AzureRmVMExtension](/powershell/module/azurerm.compute/set-azurermvmextension) för att aktivera och konfigurera Microsoft Antimalware för den virtuella datorn.

Följande kodexempel är tillgängliga:

- [Distribuera Microsoft Antimalware på virtuella ARM-datorer](antimalware-code-samples.md#enable-and-configure-microsoft-antimalware-for-azure-resource-manager-vms)
- [Lägga Microsoft Antimalware till Azure Service Fabric kluster](antimalware-code-samples.md#add-microsoft-antimalware-to-azure-service-fabric-clusters)

### <a name="enable-and-configure-antimalware-to-azure-cloud-service-extended-support-cs-es-using-powershell-cmdlets"></a>Aktivera och konfigurera program mot skadlig programvara för Azure Cloud Service Extended Support (CS-ES) med Hjälp av PowerShell-cmdlets

Så här aktiverar och konfigurerar Microsoft Antimalware med Hjälp av PowerShell-cmdlets:

1. Konfigurera Din PowerShell-miljö – läs dokumentationen på <https://github.com/Azure/azure-powershell>
2. Använd [cmdleten New-AzCloudServiceExtensionObject](/powershell/module/az.cloudservice/new-azcloudserviceextensionobject?view=azps-5.7.0&preserve-view=true) för att aktivera och konfigurera Microsoft Antimalware för din virtuella molntjänst-VM.

Följande kodexempel är tillgängligt:

- [Lägga Microsoft Antimalware till Azure Cloud Service med utökad support (CS-ES)](antimalware-code-samples.md#add-microsoft-antimalware-to-azure-cloud-service-using-extended-support)

## <a name="next-steps"></a>Nästa steg
Se [kodexempel för](antimalware-code-samples.md) att aktivera och konfigurera Microsoft Antimalware för Azure Resource Manager (ARM) virtuella datorer.