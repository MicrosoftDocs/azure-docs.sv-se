---
author: memildin
ms.service: security-center
ms.topic: include
ms.date: 03/14/2021
ms.author: memildin
ms.custom: generated
ms.openlocfilehash: 4a03a36f098035db1a91b4516dedb6a303aa41d2
ms.sourcegitcommit: 3ea12ce4f6c142c5a1a2f04d6e329e3456d2bda5
ms.translationtype: MT
ms.contentlocale: sv-SE
ms.lasthandoff: 03/15/2021
ms.locfileid: "103466214"
---
Det finns **24** rekommendationer i den här kategorin.

|Rekommendation |Beskrivning |Allvarlighetsgrad |
|---|---|---|
|Azure Defender för behållar register ska vara aktiverat |För att bygga säkra arbets belastningar i behållare, se till att de avbildningar som de är baserade på är fria från kända sårbarheter.<br>Azure Defender for container registers söker igenom registret efter säkerhets sårbarheter på varje publicerade behållar avbildning och visar detaljerade resultat per bild.<br>Aktivera Azure Defender för behållar register för att förbättra dina behållares säkerhets position och skydda dem mot angrepp.<br><br>Viktigt: att åtgärda den här rekommendationen ger kostnader för att skydda dina behållar register. Om du inte har några behållar register i den här prenumerationen debiteras inga avgifter.<br>Om du skapar några behållar register för den här prenumerationen i framtiden kommer de automatiskt att skyddas och kostnader kommer att börja vid den tidpunkten.<br> <a href='https://docs.microsoft.com/azure/security-center/azure-container-registry-integration'>Läs mer om Azure Defender för behållar register.</a><br />(Relaterad princip: [Azure Defender för behållar register ska vara aktive rad](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fmicrosoft.authorization%2fpolicyDefinitions%2fc25d9a16-bc35-4e15-a7e5-9db606bf9ed4)) |Högt |
|Azure Defender för Kubernetes ska vara aktiverat |Azure Defender för Kubernetes tillhandahåller hot skydd i real tid för dina behållares miljöer och genererar aviseringar för misstänkta aktiviteter.<br>Du kan använda den här informationen för att snabbt åtgärda säkerhetsproblem och förbättra säkerheten för dina containrar.<br><br>Viktigt: att åtgärda den här rekommendationen ger kostnader för att skydda dina Kubernetes-kluster. Om du inte har några Kubernetes-kluster i den här prenumerationen debiteras inga avgifter.<br>Om du skapar Kubernetes-kluster i den här prenumerationen i framtiden kommer de automatiskt att skyddas och kostnader kommer att börja vid den tidpunkten.<br> <a href='https://docs.microsoft.com/azure/security-center/azure-kubernetes-service-integration'>Läs mer om Azure Defender för Kubernetes.</a><br />(Relaterad princip: [Azure Defender för Kubernetes ska vara aktive rad](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fmicrosoft.authorization%2fpolicyDefinitions%2f523b5cd1-3e23-492f-a539-13118b6d1e3a)) |Högt |
|Azure Policy tillägg för Kubernetes bör installeras och aktive ras i klustren |Azure Policy tillägg för Kubernetes utökar <a target="_blank" href="https://github.com/open-policy-agent/gatekeeper">Gatekeeper</a> v3, en webhook för <a target="_blank" href="https://www.openpolicyagent.org/">Open Policy Agent</a> (OPA), för att tillämpa i/skala-framtvingande och skydd i klustren på ett centraliserat, konsekvent sätt.<p>Security Center kräver att tillägget granskas och upprätthåller säkerhetsfunktioner och efterlevnad i klustren. <a target="_blank" href="https://docs.microsoft.com/azure/governance/policy/concepts/policy-for-kubernetes"> Läs mer</a>.</p><p>Kräver Kubernetes v-1.14.0 eller senare.</p><br />(Relaterad princip: [Azure policy tillägg för Kubernetes-tjänsten (AKS) ska installeras och aktive ras på dina kluster](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f0a15ec92-a229-4763-bb14-0ea34a568f8d)) |Högt |
|CPU-och minnes gränser för containern ska tillämpas |Att framtvinga processor-och minnes gränser förhindrar resurs överbelastnings attacker (en form av denial of service-attack).<p>Vi rekommenderar att du ställer in gränser för behållare för att säkerställa att körningen förhindrar att behållaren använder mer än den konfigurerade resurs gränsen.</p><br />(Relaterad princip: [Se till att behållarens CPU-och minnes resurs gränser inte överskrider de angivna gränserna i Kubernetes-kluster](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fe345eecc-fa47-480f-9e88-67dcc122b164)) |Medel |
|Behållar avbildningar bör endast distribueras från betrodda register |Avbildningar som körs på ditt Kubernetes-kluster bör komma från kända och övervakade behållar avbildnings register. Betrodda register minskar riskerna för ditt kluster genom att begränsa möjligheten att införa okända sårbarheter, säkerhets problem och skadliga avbildningar.<br />(Relaterad princip: [kontrol lera endast tillåtna behållar avbildningar i Kubernetes-kluster](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ffebd0533-8e55-448f-b837-bd0e06f16469)) |Högt |
|Behållar register ska krypteras med en kundhanterad nyckel (CMK) |Använd Kundhanterade nycklar för att hantera krypteringen i resten av innehållet i dina register. Som standard krypteras data i vila med tjänst hanterade nycklar, men Kundhanterade nycklar (CMK) krävs ofta för att uppfylla gällande regler för efterlevnad. CMKs gör det möjligt att kryptera data med en Azure Key Vault-nyckel som skapats och ägs av dig. Du har fullständig kontroll och ansvar för nyckel livs cykeln, inklusive rotation och hantering. Läs mer om CMK-kryptering på https://aka.ms/acr/CMK .<br />(Relaterad princip: [behållar register ska krypteras med en kundhanterad nyckel (CMK)](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f5b9159ae-1701-4a6f-9a7a-aa9c8ddd0580)) |Medel |
|Behållar register ska inte tillåta obegränsad nätverks åtkomst |Azure Container Registration som standard accepterar anslutningar via Internet från värdar i ett nätverk. För att skydda dina register från potentiella hot kan du tillåta åtkomst från enbart vissa offentliga IP-adresser eller adress intervall. Om registret inte har en IP-eller brand Väggs regel eller ett konfigurerat virtuellt nätverk, visas det i resurser som inte är felfria. Lär dig mer om att Container Registry nätverks regler här: https://aka.ms/acr/portal/public-network och här https://aka.ms/acr/vnet .<br />(Relaterad princip: [behållar register ska inte tillåta obegränsad nätverks åtkomst](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fd0793b48-0edc-4296-a390-4c75d1bdfd71)) |Medel |
|Behållar register ska använda privat länk |Med Azures privata länk kan du ansluta ditt virtuella nätverk till Azure-tjänster utan en offentlig IP-adress på källan eller målet. Den privata länk plattformen hanterar anslutningen mellan konsumenter och tjänster över Azures stamnät nätverk. Genom att mappa privata slut punkter till dina behållar register i stället för hela tjänsten, skyddas du också mot data läckage. Läs mer på: https://aka.ms/acr/private-link .<br />(Relaterad princip: [behållar register ska använda privat länk](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fe8eef0a8-67cf-4eb4-9386-14b0e78733d4)) |Medel |
|Container med behörighets eskalering bör undvikas |Behållare bör inte köras med behörighets eskalering till roten i ditt Kubernetes-kluster.<br>Attributet AllowPrivilegeEscalation styr om en process får fler privilegier än den överordnade processen.<br />(Relaterad princip: [Kubernetes-kluster ska inte tillåta eskalering av behållar behörighet](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f1c6e92c9-99f0-4e55-9cf2-0c234dc48f99)) |Medel |
|Behållare som delar känsliga värd namn områden bör undvikas |Undvik Pod åtkomst till känsliga värd namn rymder (värd process-ID och värd-IPC) i ett Kubernetes-kluster för att skydda mot behörighets eskalering utanför behållaren.<br />(Relaterad princip: [Kubernetes kluster behållare bör inte dela värd process-ID eller värd-IPC-namnrymd](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f47a1ee2f-2a2a-4576-bf2a-e0e36709c2b8)) |Medel |
|Behållare ska bara lyssna på tillåtna portar |För att minska attack ytan på ditt Kubernetes-kluster begränsar du åtkomsten till klustret genom att begränsa behållar åtkomsten till de konfigurerade portarna.<br />(Relaterad princip: [Se till att behållare bara lyssnar på tillåtna portar i Kubernetes-kluster](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f440b515e-a580-421e-abeb-b159a61ddcbc)) |Medel |
|Oföränderligt (skrivskyddat) rot fil system ska tillämpas för behållare |Behållare ska köras med ett skrivskyddat rot fil system i ditt Kubernetes-kluster. Oåterkalleligt fil system skyddar behållare från ändringar vid körning med skadliga binärfiler som läggs till i sökvägen.<br />(Relaterad princip: [Kubernetes kluster behållare ska köras med ett skrivskyddat rot fil system](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fdf49d893-a74c-421d-bc95-c663042e5b80)) |Medel |
|Kubernetes-kluster bör endast vara tillgängliga via HTTPS |Användning av HTTPS garanterar autentisering och skyddar data i överföring från angrepp på nätverks nivå. Den här funktionen är för närvarande allmänt tillgänglig för Kubernetes service (AKS) och i för hands versionen för AKS-motorn och Azure-bågen aktiverade Kubernetes. Mer information finns på https://aka.ms/kubepolicydoc<br />(Relaterad princip: [Framtvinga inkommande https i Kubernetes-kluster](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f1a5b4dca-0b6f-4cf5-907c-56316bc1bf3d)) |Högt |
|Kubernetes Services Management API-Server ska konfigureras med begränsad åtkomst |För att säkerställa att endast program från tillåtna nätverk, datorer eller undernät har åtkomst till ditt kluster begränsar du åtkomsten till Kubernetes Service Management-API-servern. Du kan begränsa åtkomsten genom att definiera tillåtna IP-intervall, eller genom att konfigurera dina API-servrar som privata kluster enligt beskrivningen i <a target='_blank' href=https://docs.microsoft.com/azure/aks/private-clusters>https://docs.microsoft.com/azure/aks/private-clusters</a> .<br />(Relaterad princip: [tillåtna IP-adressintervall bör definieras för Kubernetes Services](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f0e246bcf-5f6f-4f87-bc6f-775d4712c7ea)) |Högt |
|Kubernetes Services bör uppgraderas till en icke-sårbar Kubernetes-version |Uppgradera ditt Kubernetes-tjänst kluster till en senare Kubernetes-version för att skydda mot kända sårbarheter i den aktuella Kubernetes-versionen. Sårbarhet <a target='_blank' href='https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-9946'>CVE-2019-9946</a> har korrigerats i Kubernetes-versionerna 1.11.9 +, 1.12.7 +, 1.13.5 + och 1.14.0 +<br />(Relaterad princip: [Kubernetes-tjänster bör uppgraderas till en icke-sårbar Kubernetes-version](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ffb893a29-21bb-418c-a157-e99480ec364c)) |Högt |
|Minst privilegierade Linux-funktioner bör tillämpas för behållare |Om du vill minska attack ytan på din behållare begränsar du Linux-funktionerna och beviljar vissa behörigheter till behållare utan att bevilja alla privilegier för rot användaren. Vi rekommenderar att du släpper alla funktioner och lägger sedan till de som krävs<br />(Relaterad princip: [Kubernetes-kluster behållare bör endast använda tillåtna funktioner](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fc26596ff-4d70-4e6a-9a30-c2506bd2f80c)) |Medel |
|Åsidosättning eller inaktive ring av behållare AppArmor-profilen bör vara begränsad |Behållare som körs på ditt Kubernetes-kluster bör begränsas till endast tillåtna AppArmor-profiler.<br>; AppArmor (Application Threat) är en Linux-säkerhetsmodul som skyddar ett operativ system och dess program från säkerhetshot. En system administratör kan använda den för att associera en AppArmor säkerhets profil med varje program.<br />(Relaterad princip: [Kubernetes-kluster behållare bör endast använda tillåtna apparmor-profiler](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f511f5417-5d12-434d-ab2e-816901e72a5e)) |Högt |
|Privilegierade behållare bör undvikas |Undvik privilegierade behållare när det är möjligt för att förhindra obegränsad värd åtkomst.<p>Privilegierade behållare har alla rot funktioner på en värddator. De kan användas som start punkter för attacker och för att sprida skadlig kod eller skadlig kod till komprometterade program, värdar och nätverk.</p><br />(Relaterad princip: [Tillåt inte privilegierade behållare i Kubernetes-kluster](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f95edb821-ddaf-4404-9732-666045e056b4)) |Medel |
|Role-Based Access Control ska användas på Kubernetes-tjänster |Om du vill ha detaljerad filtrering för de åtgärder som användarna kan utföra använder Role-Based Access Control (RBAC) för att hantera behörigheter i Kubernetes-tjänstekluster och konfigurera relevanta Auktoriseringsprinciper. Mer information finns i <a target='_blank' href='https://docs.microsoft.com/azure/aks/concepts-identity#role-based-access-controls-rbac'>rollbaserad åtkomst kontroll i Azure</a>.<br />(Relaterad princip: [rollbaserad Access Control (RBAC) ska användas på Kubernetes-tjänster](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2fac4a19c2-fa67-49b4-8ae5-0b2e78c49457)) |Högt |
|Att köra behållare som rot användare bör undvikas |Behållare ska köras som icke-rot användare i ditt Kubernetes-kluster. Kör en process som rot användaren i en behållare kör den som rot på värden. I händelse av kompromisser har en angripare rot i behållaren och eventuella fel konfigurationer blir lättare att utnyttja.<br />(Relaterad princip: [Kubernetes-kluster poddar och behållare bör endast köras med godkända användar-och grupp-ID: n](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ff06ddb64-5fa3-4b77-b166-acb36f7f6042)) |Högt |
|Tjänsterna ska bara lyssna på tillåtna portar |Begränsa åtkomsten till klustret genom att begränsa åtkomsten till klustret genom att begränsa åtkomsten till de konfigurerade portarna genom att begränsa åtkomsten till det Kubernetes klustret.<br />(Relaterad princip: [kontrol lera att tjänsterna bara lyssnar på tillåtna portar i Kubernetes-kluster](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f233a2a17-77ca-4fb1-9b6b-69223d272a44)) |Medel |
|Användning av värd nätverk och portar ska begränsas |Begränsa Pod-åtkomsten till värd nätverket och det tillåtna port intervallet för värd i ett Kubernetes-kluster. Poddar som skapas med attributet hostNetwork som är aktiverat kommer att dela nodens nätverks utrymme. För att undvika komprometterad behållare från att avslöja nätverks trafiken rekommenderar vi att du inte placerar din poddar i värd nätverket. Om du behöver exponera en container port i nodens nätverk och använder en Kubernetes som inte uppfyller dina behov, är det en annan möjlighet att ange en hostPort för behållaren i pod-specifikationen.<br />(Relaterad princip: [Kubernetes Cluster poddar ska endast använda godkända värd nätverk och port intervall](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f82985f06-dc18-4a48-bc1c-b9f4f0098cfe)) |Medel |
|Användningen av Pod HostPath-volym monteringar bör begränsas till en känd lista för att begränsa åtkomsten till noden från komprometterade behållare |Vi rekommenderar att du begränsar Pod HostPath-volym monteringar i ditt Kubernetes-kluster till de konfigurerade tillåtna värd Sök vägarna. Vid kompromisser ska åtkomsten till behållar noden från behållare vara begränsad<br />(Relaterad princip: [Kubernetes Cluster Pod hostPath Volumes ska endast använda tillåtna värd Sök vägar](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f098fc59e-46c7-4d99-9b16-64990e543d75)) |Medel |
|Säkerhets risker i Azure Container Registry avbildningar bör åtgärdas (drivs av Qualys) |Sårbarhets bedömning för behållar avbildning söker igenom registret efter säkerhets sårbarheter och visar detaljerade resultat för varje bild. Att lösa sårbarheter kan avsevärt förbättra dina behållar säkerhets position och skydda dem mot angrepp.<br />(Relaterad princip: [sårbarheter i Azure Container Registry avbildningar bör åtgärdas](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f5f0f936f-2f01-4bf5-b6be-d423792fa562)) |Högt |
|||
